{"version":3,"sources":["assets/images/brain-overview.jpg","logo.svg","components/BottomAppBar.js","actions/emitterIdentityFilter.js","smoothedzscore.js","components/SoundEmitter.js","components/SoundReceiver.js","components/AudioField.js","components/ZoomAndBrush.js","components/ChannelControl.js","components/TransportControls.js","App.js","serviceWorker.js","reducers/emitters.js","reducers/transport.js","reducers/index.js","index.js"],"names":["module","exports","useStyles","makeStyles","theme","appBar","top","bottom","grow","flexGrow","speedDial","position","zIndex","left","right","margin","actions","icon","name","BottomAppBar","fDialog","classes","React","useState","open","setOpen","handleClose","event","Fragment","CssBaseline","AppBar","color","className","Toolbar","IconButton","edge","aria-label","SpeedDial","FabProps","size","ariaLabel","SpeedDialIcon","onClose","onOpen","map","action","SpeedDialAction","key","tooltipTitle","onClick","filter","ems","em","v","i","arr","length","mean","a","reduce","acc","val","sum","stddev","arr_mean","Math","sqrt","smoothed_z_score","y","params","p","lag","threshold","influence","influece","undefined","signals","Array","fill","filteredY","slice","lead_in","avgFilter","stdFilter","abs","y_lag","connect","state","ownProps","enabled","emitterIdentity","emitters","synth","panner3D","panner","id","events","data","max_length","transport","onPositionChange","callback","console","log","dispatch","isLoaded","setIsLoaded","useEffect","cb","Synth","Panner3D","sync","panningModel","chain","MasterOut","setUpSynthDevice","synth_d","panner3D_d","type","triggerRelease","el","signal_data","ev","Part","time","value","triggerAttackRelease","x","start","bounds","grid","onStop","e","node","Fab","disabled","style","useStyle","rhombus","width","height","transform","borderRadius","micIcon","SoundReceiver","defaultPos","setPosition","variant","container_max","minHeight","max_height","responsive_img","sources","audio","setAudio","setEmitters","z","recvPosition","setRecvPosition","containerRef","useRef","updateEmitterPosition","delta","current","clientWidth","clientHeight","navigator","mediaDevices","getUserMedia","video","Listener","setOrientation","Container","backgroundImage","BrainSource","backgroundSize","backgroundRepeat","backgroundPosition","ref","source","s","pos","registerSoundEmitter","VictoryZoomVoronoiContainer","createContainer","index","heightSm","lineData","zoomDomain","setZoomDomain","handleZoom","domain","containerComponent","zoomDimension","onZoomDomainChange","cursorLabel","datum","round","cursorDimension","defaultCursorValue","stroke","padding","brushDimension","brushDomain","onBrushDomainChange","visibility","signalMap","setSignalMap","replace","c","crypto","getRandomValues","Uint8Array","toString","s_map","push","y_s","Typography","disableHeight","syncId","strokeDasharray","dataKey","dot","activeDot","Button","transportControls","backgroundColor","display","alignItems","maxWidth","controlFab","progressBar","isPlaying","setIsPlaying","progress","setProgress","counter","setCounter","Transport","loop","setLoopPoints","pause","scheduleRepeat","seconds","stop","clear","LinearProgress","toFixed","overflowY","setData","fDOpen","setFDOpen","handleFDClose","Grid","container","direction","item","component","Paper","xs","md","elevation","Dialog","DialogTitle","DialogContent","onFileLoaded","res","tmp","isNaN","min","max","scaled","parserOptions","dynamicTyping","skipEmptyLine","d","Boolean","window","location","hostname","match","emitter","playState","combineReducers","store","createStore","rootReducer","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c34c7501.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/brain-overview.3b0eb74b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Avatar from '@material-ui/core/Avatar';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AddIcon from '@material-ui/icons/Add';\nimport SearchIcon from '@material-ui/icons/Search';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\n\nconst useStyles = makeStyles(theme => ({\n  appBar: {\n    top: 'auto',\n    bottom: 0,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  speedDial: {\n    position: 'absolute',\n    zIndex: 1,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    margin: '0 auto',\n  },\n}));\n\nconst actions = [{icon: <FileCopyIcon />, name: 'Add DataSource'}];\n\nexport default function BottomAppBar({fDialog = () => {}}) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = event => {\n    setOpen(true);\n  };\n  const handleClose = event => {\n    setOpen(false);\n  };\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <AppBar position=\"sticky\" color=\"primary\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\">\n            <MenuIcon />\n          </IconButton>\n          <SpeedDial\n            FabProps={{color: 'secondary', size: 'large'}}\n            ariaLabel=\"add\"\n            icon={<SpeedDialIcon />}\n            onClose={handleClose}\n            onOpen={handleOpen}\n            open={open}\n            className={classes.speedDial}>\n            {actions.map(action => (\n              <SpeedDialAction\n                key={action.name}\n                icon={action.icon}\n                tooltipTitle={action.name}\n                onClick={() => {\n                  handleClose();\n                  fDialog(true);\n                }}\n              />\n            ))}\n          </SpeedDial>\n          <div className={classes.grow} />\n          <IconButton edge=\"end\" color=\"inherit\">\n            <MoreIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </React.Fragment>\n  );\n}\n","function filter(ems, name) {\n  const em = ems.filter((v, i, arr) => v.name === name);\n  if (em.length > 0) {\n    return em[0];\n  } else {\n    return {};\n  }\n}\nexport default filter;\n","function sum(a) {\n  return a.reduce((acc, val) => acc + val);\n}\n\nfunction mean(a) {\n  return sum(a) / a.length;\n}\n\nfunction stddev(arr) {\n  const arr_mean = mean(arr);\n  const r = function(acc, val) {\n    return acc + (val - arr_mean) * (val - arr_mean);\n  };\n  return Math.sqrt(arr.reduce(r, 0.0) / arr.length);\n}\n\nfunction smoothed_z_score(y, params) {\n  var p = params || {};\n  // init cooefficients\n  const lag = p.lag || 5;\n  const threshold = p.threshold || 3.5;\n  const influence = p.influece || 0.5;\n\n  if (y === undefined || y.length < lag + 2) {\n    throw ` ## y data array to short(${y.length}) for given lag of ${lag}`;\n  }\n\n  // init variables\n  var signals = Array(y.length).fill(0);\n  var filteredY = y.slice(0);\n  const lead_in = y.slice(0, lag);\n  //console.log(\"1: \" + lead_in.toString())\n\n  var avgFilter = [];\n  avgFilter[lag - 1] = mean(lead_in);\n  var stdFilter = [];\n  stdFilter[lag - 1] = stddev(lead_in);\n  //console.log(\"2: \" + stdFilter.toString())\n\n  for (var i = lag; i < y.length; i++) {\n    //console.log(`${y[i]}, ${avgFilter[i-1]}, ${threshold}, ${stdFilter[i-1]}`)\n    if (Math.abs(y[i] - avgFilter[i - 1]) > threshold * stdFilter[i - 1]) {\n      if (y[i] > avgFilter[i - 1]) {\n        signals[i] = +1; // positive signal\n      } else {\n        signals[i] = -1; // negative signal\n      }\n      // make influence lower\n      filteredY[i] = influence * y[i] + (1 - influence) * filteredY[i - 1];\n    } else {\n      signals[i] = 0; // no signal\n      filteredY[i] = y[i];\n    }\n\n    // adjust the filters\n    const y_lag = filteredY.slice(i - lag, i);\n    avgFilter[i] = mean(y_lag);\n    stdFilter[i] = stddev(y_lag);\n  }\n\n  return signals;\n}\n\nexport default smoothed_z_score;\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport Draggable from 'react-draggable';\nimport {\n  Transport,\n  PolySynth,\n  Synth,\n  Panner3D,\n  Reverb,\n  Part,\n  Master as MasterOut,\n} from 'tone';\nimport {connect} from 'react-redux';\nimport emitterIdentity from '../actions/emitterIdentityFilter';\nimport smoothed_z_score from '../smoothedzscore';\n\nfunction setUpSynthDevice(cb) {\n  const synth = new Synth();\n  const panner3D = new Panner3D();\n  synth.sync();\n  panner3D.panningModel = 'HRTF';\n  synth.chain(panner3D, MasterOut);\n  cb(true);\n  return [synth, panner3D];\n}\n\nfunction SoundEmitter({\n  name,\n  onPositionChange,\n  callback = console.log,\n  enabled,\n  synth,\n  panner3D,\n  position,\n  events,\n  id,\n  max_length,\n  dispatch,\n}) {\n  const [isLoaded, setIsLoaded] = React.useState(false);\n  const [emitterEvents, setEmitterEvents] = React.useState([]);\n  React.useEffect(() => {\n    const [synth_d, panner3D_d] = setUpSynthDevice(setIsLoaded);\n    dispatch({\n      type: 'UPDATE_EMITTER_AUDIO_NODES',\n      name: name,\n      synth: synth_d,\n      panner: panner3D_d,\n    });\n  }, []);\n  React.useEffect(() => {\n    if (isLoaded) {\n      callback(synth, panner3D, position);\n    }\n  }, [synth, panner3D]);\n  React.useEffect(() => {\n    if (isLoaded) {\n      onPositionChange(position);\n    }\n  }, [position]);\n  React.useEffect(() => {\n    if (isLoaded) {\n      synth.triggerRelease();\n      const signals = smoothed_z_score(events.map((el, i) => el.y), {\n        lag: 30,\n        threshold: 1.5,\n      });\n      dispatch({\n        type: 'EMITTER_SIGNAL_DATA',\n        name: name,\n        signal_data: signals.map((el, i) => el / 3 + 0.5),\n      });\n      const ev = events.filter((v, i, a) => signals[i] !== 0);\n      const em = new Part(\n        function(time, value) {\n          value = value * 1000 + 250; // maps between 250 and 1250hz\n          synth.triggerAttackRelease(value, 0.5, time);\n        },\n        ev.map((el, i) => {\n          return [el.x / 10, el.y];\n        }),\n      );\n      em.start(0);\n      if (ev[ev.length - 1].x / 10 > max_length) {\n        dispatch({\n          type: 'UPDATE_MAX_LENGTH',\n          max_length: ev[ev.length - 1].x / 10,\n        });\n      }\n    }\n  }, [events, isLoaded]);\n\n  function onControlledDrag(e, data) {\n    const {x, y, node} = data;\n    dispatch({type: 'UPDATE_EMITTER_POS', name: name, position: {x, y}});\n  }\n  if (enabled) {\n    return (\n      <Draggable\n        bounds=\"parent\"\n        grid={[10, 10]}\n        position={position}\n        onStop={onControlledDrag}>\n        <Fab\n          color=\"secondary\"\n          disabled={!isLoaded}\n          style={{position: 'absolute'}}>\n          {id.slice(0, 3)}\n          <VolumeUpIcon />\n        </Fab>\n      </Draggable>\n    );\n  } else {\n    return <></>;\n  }\n}\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    enabled: emitterIdentity(state.emitters, ownProps.name).enabled,\n    synth: emitterIdentity(state.emitters, ownProps.name).synth,\n    panner3D: emitterIdentity(state.emitters, ownProps.name).panner,\n    position: emitterIdentity(state.emitters, ownProps.name).position,\n    id: emitterIdentity(state.emitters, ownProps.name).id,\n    events: emitterIdentity(state.emitters, ownProps.name).data,\n    max_length: state.transport.max_length,\n  };\n};\n\nexport default connect(mapStateToProps)(SoundEmitter);\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Fab from '@material-ui/core/Fab';\nimport MicIcon from '@material-ui/icons/Mic';\nimport Draggable from 'react-draggable';\n\nconst useStyle = makeStyles({\n  rhombus: {\n    width: 75,\n    height: 75,\n    transform: 'rotate(45deg)',\n    borderRadius: 0,\n  },\n  micIcon: {\n    width: 45,\n    height: 45,\n    transform: 'rotate(-45deg)',\n  },\n});\n\nfunction SoundReceiver({\n  callback = console.log,\n  defaultPos = {x: 512, y: 512},\n}) {\n  const classes = useStyle();\n  const [position, setPosition] = React.useState({\n    x: defaultPos.x,\n    y: defaultPos.y,\n  });\n  const [parentSize, setParentSize] = React.useState({width: 0, height: 0});\n  function onControlledDrag(e, data) {\n    const {x, y, node} = data;\n    setPosition({x, y});\n  }\n  React.useEffect(() => {\n    callback(position);\n  }, [position]);\n  return (\n    <Draggable\n      bounds=\"parent\"\n      grid={[10, 10]}\n      position={position}\n      onStop={onControlledDrag}>\n      <div style={{position: 'absolute'}}>\n        <Fab\n          color=\"primary\"\n          size=\"large\"\n          variant=\"extended\"\n          className={classes.rhombus}>\n          <MicIcon className={classes.micIcon} />\n        </Fab>\n      </div>\n    </Draggable>\n  );\n}\n\nexport default SoundReceiver;\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport Draggable from 'react-draggable';\nimport SoundEmitter from '../components/SoundEmitter';\nimport SoundReceiver from '../components/SoundReceiver';\nimport {Listener} from 'tone';\nimport {connect} from 'react-redux';\n\nimport BrainSource from '../assets/images/brain-overview.jpg';\n\nconst useStyles = makeStyles(theme => ({\n  container_max: {\n    width: '100%',\n    height: '100%',\n    minHeight: '100%',\n  },\n  max_height: {height: '100vh'},\n  responsive_img: {width: '100%', height: 'auto'},\n}));\n\nconst SCALE = 10;\n\nfunction AudioField({sources, dispatch}) {\n  const classes = useStyles();\n  const [audio, setAudio] = React.useState(null);\n  const [emitters, setEmitters] = React.useState({});\n  const [recvPosition, setRecvPosition] = React.useState({\n    x: 0.0,\n    y: 0.0,\n    z: 0.0,\n  });\n  const containerRef = React.useRef();\n\n  //set Up Audio Context in Effect Hook\n  React.useEffect(() => {\n    (async () => {\n      const audio = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: false,\n      });\n      setAudio(audio);\n    })();\n  }, []);\n  React.useEffect(() => {\n    console.log('new Audio Input');\n  }, [audio]);\n\n  React.useEffect(() => {\n    const x = recvPosition.x / containerRef.current.clientWidth;\n    const y = recvPosition.y / containerRef.current.clientHeight;\n    const z = 0.0;\n    Listener.setPosition(x, y, z).setOrientation(0, 1, 0, 0, 0, 1);\n    for (var em in emitters) {\n      updateEmitterPosition(em, emitters[em].position);\n    }\n  }, [recvPosition]);\n\n  function registerSoundEmitter(name, synth, panner3D, position) {\n    let state = emitters;\n    state[name] = {synth: synth, panner3D: panner3D, position: position};\n    setEmitters(state);\n  }\n\n  function updateEmitterPosition(name, position) {\n    let delta = {\n      x: (position.x - recvPosition.x) / containerRef.current.clientWidth,\n      y: (recvPosition.y - position.y) / containerRef.current.clientHeight,\n    };\n    if (emitters[name] !== null) {\n      emitters[name].position = position;\n      emitters[name].panner3D.setPosition(delta.x * SCALE, delta.y * SCALE, 0);\n    }\n  }\n  return (\n    <Container className={classes.container_max}>\n      <div\n        className={classes.container_max}\n        style={{\n          backgroundImage: 'url(' + BrainSource + ')',\n          backgroundSize: 'contain',\n          backgroundRepeat: 'no-repeat',\n          backgroundPosition: 'center',\n        }}\n        ref={containerRef}>\n        {sources.map(source => (\n          <SoundEmitter\n            key={source.name}\n            name={source.name}\n            onPositionChange={position =>\n              updateEmitterPosition(source.name, position)\n            }\n            callback={(s, p, pos) => {\n              registerSoundEmitter(source.name, s, p, pos);\n            }}\n          />\n        ))}\n        <SoundReceiver callback={setRecvPosition} />\n      </div>\n    </Container>\n  );\n}\nconst mapStateToProps = state => {\n  return {\n    sources: state.emitters,\n  };\n};\n\nexport default connect(mapStateToProps)(AudioField);\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {\n  VictoryChart,\n  VictoryLine,\n  VictoryBrushContainer,\n  createContainer,\n  VictoryAxis,\n} from 'victory';\n\nconst VictoryZoomVoronoiContainer = createContainer('zoom', 'cursor');\n\nfunction ZoomAndBrush({width, height, heightSm, lineData = [], index}) {\n  const [zoomDomain, setZoomDomain] = React.useState();\n  function handleZoom(domain) {\n    setZoomDomain(domain);\n  }\n  function handleBrush(domain) {\n    setZoomDomain(domain);\n  }\n  return (\n    <div style={{width: width}}>\n      <VictoryChart\n        width={width}\n        height={height}\n        containerComponent={\n          <VictoryZoomVoronoiContainer\n            zoomDimension=\"x\"\n            zoomDomain={zoomDomain}\n            onZoomDomainChange={handleZoom}\n            cursorLabel={({datum}) => `${Math.round(datum.x, 0)}`}\n            cursorDimension=\"x\"\n            defaultCursorValue={index}\n          />\n        }>\n        <VictoryLine\n          style={{\n            data: {stroke: 'tomato'},\n          }}\n          data={lineData}\n          x=\"x\"\n          y=\"y\"\n        />\n      </VictoryChart>\n      <VictoryChart\n        padding={{top: 0, left: 50, right: 50, bottom: 30}}\n        width={width}\n        height={heightSm}\n        containerComponent={\n          <VictoryBrushContainer\n            brushDimension=\"x\"\n            brushDomain={zoomDomain}\n            onBrushDomainChange={handleZoom}\n          />\n        }>\n        <VictoryAxis />\n        <VictoryLine\n          style={{\n            data: {stroke: 'tomato'},\n          }}\n          data={lineData}\n          x=\"x\"\n          y=\"y\"\n        />\n      </VictoryChart>\n    </div>\n  );\n}\nconst mapStateToProps = state => {\n  return {index: state.transport.index};\n};\nexport default connect(mapStateToProps)(ZoomAndBrush);\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Portal from '@material-ui/core/Portal';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport ZoomAndBrush from '../components/ZoomAndBrush';\nimport {AutoSizer} from 'react-virtualized';\nimport {connect} from 'react-redux';\nimport emitterIdentity from '../actions/emitterIdentityFilter';\nimport {Transport, Event} from 'tone';\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  Brush,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Label,\n} from 'recharts';\n\nfunction uuidv4() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16),\n  );\n}\n\nfunction ChannelControl({name, visibility, data, signal_data, id, dispatch}) {\n  const [signalMap, setSignalMap] = React.useState({});\n  React.useEffect(() => {\n    dispatch({\n      type: 'ADD_EMITTER',\n      name: name,\n      position: {x: 0, y: 0},\n      id: uuidv4(),\n    });\n  }, []);\n  React.useEffect(() => {\n    let s_map = [];\n    for (var i = 0; i < data.length; i++) {\n      s_map.push({x: i, y: data[i].y, y_s: signal_data[i]});\n    }\n    setSignalMap(s_map);\n  }, [data, signal_data]);\n  return (\n    <>\n      <Typography variant=\"h6\">{name}</Typography>\n      <AutoSizer disableHeight>\n        {({width}) => (\n          <LineChart width={width} height={200} data={signalMap} syncId=\"anyId\">\n            <CartesianGrid strokeDasharray=\"3 3\" />\n            <XAxis dataKey=\"x\" />\n            <YAxis type=\"number\" domain={[0, 1]} />\n            <Tooltip />\n            <Line\n              type=\"step\"\n              dot={false}\n              activeDot={false}\n              dataKey=\"y_s\"\n              stroke=\"grey\"\n            />\n            <Line\n              type=\"monotone\"\n              dot={false}\n              activeDot={{stroke: 'red'}}\n              dataKey=\"y\"\n              stroke=\"lightgreen\"\n            />\n          </LineChart>\n        )}\n      </AutoSizer>\n      <Button\n        color={visibility ? 'default' : 'secondary'}\n        variant=\"outlined\"\n        onClick={() => dispatch({type: 'TOGGLE_EMITTER_ENABLED', name: name})}>\n        {visibility ? <VisibilityIcon /> : <VisibilityOffIcon />}\n      </Button>\n      {id ? (\n        <Typography>\n          ID: <strong>{id.slice(0, 3)}</strong>\n          <em>{id.slice(3)}</em>\n        </Typography>\n      ) : null}\n    </>\n  );\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    visibility: emitterIdentity(state.emitters, ownProps.name).enabled,\n    id: emitterIdentity(state.emitters, ownProps.name).id,\n    signal_data:\n      emitterIdentity(state.emitters, ownProps.name).signal_data || [],\n    data: emitterIdentity(state.emitters, ownProps.name).data || [],\n  };\n};\n\nexport default connect(mapStateToProps)(ChannelControl);\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport {Transport} from 'tone';\nimport Typography from '@material-ui/core/Typography';\nimport {connect} from 'react-redux';\n\nconst useStyles = makeStyles(theme => ({\n  transportControls: {\n    backgroundColor: '#eee',\n    borderRadius: 50,\n    padding: '10px 20px',\n    position: 'absolute',\n    display: 'flex',\n    alignItems: 'center',\n    maxWidth: '50vw',\n    bottom: 25,\n    left: 100,\n  },\n  controlFab: {position: 'relative', margin: '0 5px'},\n  progressBar: {margin: '0 10px'},\n}));\n\nfunction TransportControls({length}) {\n  const classes = useStyles();\n  const [isPlaying, setIsPlaying] = React.useState(false);\n  const [progress, setProgress] = React.useState(0);\n  const [counter, setCounter] = React.useState(false);\n  React.useEffect(() => {\n    Transport.loop = true;\n    Transport.setLoopPoints(0, length);\n  }, [length]);\n  function togglePlaying() {\n    if (isPlaying) {\n      Transport.pause();\n      setIsPlaying(false);\n    } else {\n      Transport.start();\n      setIsPlaying(true);\n      if (counter === false) {\n        var id = Transport.scheduleRepeat(\n          time => {\n            setProgress(Transport.progress);\n          },\n          0.2,\n          0,\n        );\n        setCounter(id);\n        console.log(id);\n      }\n    }\n  }\n  function handleStop() {\n    Transport.seconds = 0;\n    Transport.stop();\n    Transport.seconds = 0;\n    Transport.start();\n    Transport.stop();\n    Transport.clear(counter);\n    setCounter(false);\n    setProgress(0);\n    setIsPlaying(false);\n  }\n  return (\n    <span className={classes.transportControls}>\n      <Fab\n        color=\"primary\"\n        size=\"large\"\n        className={classes.controlFab}\n        onClick={togglePlaying}>\n        {isPlaying ? <PauseIcon /> : <PlayArrowIcon />}\n      </Fab>\n      <Fab\n        color=\"primary\"\n        size=\"large\"\n        className={classes.controlFab}\n        onClick={handleStop}>\n        <StopIcon />\n      </Fab>\n      <LinearProgress\n        variant=\"determinate\"\n        style={{width: 200}}\n        value={progress * 100}\n      />\n      <Typography variant=\"h5\" className={classes.progressBar}>\n        {(progress * length).toFixed(1)}/{length.toFixed(1)}s\n      </Typography>\n    </span>\n  );\n}\n\nconst mapStateToProps = state => {\n  return {\n    length: state.transport.max_length,\n  };\n};\nexport default connect(mapStateToProps)(TransportControls);\n","import React from 'react';\nimport logo from './logo.svg';\nimport {connect} from 'react-redux';\nimport './App.css';\nimport '../node_modules/react-vis/dist/style.css';\nimport {XYPlot, LineSeries} from 'react-vis';\n//import openSocket from 'socket.io-client';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport Fab from '@material-ui/core/Fab';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport StopIcon from '@material-ui/icons/Stop';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport CSVReader from 'react-csv-reader';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport {AutoSizer} from 'react-virtualized';\n\nimport BottomAppBar from './components/BottomAppBar';\nimport AudioField from './components/AudioField';\nimport ChannelControl from './components/ChannelControl';\nimport TransportControls from './components/TransportControls';\nimport {Transport} from 'tone';\nimport {LineChart, Brush, XAxis} from 'recharts';\n\nconst useStyles = makeStyles(theme => ({\n  container_max: {width: '100%', height: '100%'},\n  max_height: {height: '100vh', overflowY: 'scroll'},\n  responsive_img: {width: '100%', height: 'auto'},\n  transportControls: {position: 'absolute', bottom: 25, left: 100},\n  controlFab: {position: 'relative', margin: '0 5px'},\n}));\n\nfunction App({dispatch}) {\n  const classes = useStyles();\n  const containerRef = React.useRef();\n  const [data, setData] = React.useState([]);\n  const [fDOpen, setFDOpen] = React.useState(false);\n  React.useEffect(() => {\n    Transport.clear();\n    for (var i = 0; i < data.length; i++) {\n      dispatch({type: 'EMITTER_DATA', name: `Channel ${i}`, data: data[i]});\n    }\n  }, [data]);\n  function handleFDClose() {\n    setFDOpen(false);\n  }\n  function handleFileLoaded(data) {\n    console.log('>>>LOAD', data);\n    var res = [];\n    for (var i = 0; i < data[0].length; i++) {\n      var tmp = data.map(el => {\n        return el[i];\n      });\n      tmp = tmp.filter((v, i, a) => !isNaN(v));\n      const min = Math.min(...tmp);\n      const max = Math.max(...tmp);\n      const scaled = tmp.map((el, i) => {\n        return {x: i, y: (el - min) / (max - min)};\n      });\n      res[i] = scaled;\n    }\n    setData(res);\n    handleFDClose();\n  }\n  return (\n    <div style={{width: '100vw', height: '100vh'}}>\n      <Grid container direction=\"row\">\n        <Grid\n          item\n          component={Paper}\n          xs={12}\n          md={8}\n          className={classes.max_height}>\n          <AudioField sources={[]} ref={containerRef} />\n          <TransportControls />\n        </Grid>\n        <div style={{height: '5vh', width: 0}} />\n        <Grid\n          item\n          component={Paper}\n          elevation={3}\n          xs={12}\n          md={4}\n          className={classes.max_height}\n          style={{position: 'relative'}}>\n          <Container\n            className={classes.container_max}\n            style={{overflowY: 'scroll'}}>\n            <Dialog open={fDOpen} onClose={handleFDClose}>\n              <DialogTitle>Load CSV EEG Recording</DialogTitle>\n              <DialogContent>\n                <CSVReader\n                  onFileLoaded={handleFileLoaded}\n                  parserOptions={{\n                    dynamicTyping: true,\n                    skipEmptyLine: true,\n                  }}\n                />\n                <div style={{minHeight: '50px'}} />\n              </DialogContent>\n            </Dialog>\n            {data ? (\n              <AutoSizer disableHeight style={{position: 'sticky'}}>\n                {({width}) => (\n                  <LineChart\n                    width={width}\n                    height={50}\n                    data={data[0]}\n                    syncId=\"anyId\">\n                    <Brush />\n                    <XAxis dataKey=\"x\" />\n                  </LineChart>\n                )}\n              </AutoSizer>\n            ) : null}\n            {data\n              ? data.map((d, i) => (\n                  <ChannelControl key={i} name={`Channel ${i}`} />\n                ))\n              : null}\n          </Container>\n          <BottomAppBar fDialog={setFDOpen} />\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nexport default connect()(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const emitters = (state = [], action) => {\n  switch (action.type) {\n    case 'ADD_EMITTER':\n      return [\n        ...state,\n        {\n          name: action.name,\n          position: action.position,\n          synth: action.synth,\n          panner: action.panner3D,\n          enabled: true,\n          id: action.id,\n        },\n      ];\n    case 'UPDATE_EMITTER_AUDIO_NODES':\n      return state.map(emitter =>\n        emitter.name === action.name\n          ? {...emitter, synth: action.synth, panner: action.panner}\n          : emitter,\n      );\n    case 'TOGGLE_EMITTER_ENABLED':\n      return state.map(emitter =>\n        emitter.name === action.name\n          ? {...emitter, enabled: !emitter.enabled}\n          : emitter,\n      );\n    case 'UPDATE_EMITTER_POS':\n      return state.map(emitter =>\n        emitter.name === action.name\n          ? {...emitter, position: action.position}\n          : emitter,\n      );\n    case 'EMITTER_SIGNAL_DATA':\n      return state.map(emitter =>\n        emitter.name === action.name\n          ? {...emitter, signal_data: action.signal_data}\n          : emitter,\n      );\n    case 'EMITTER_DATA':\n      return state.map(emitter =>\n        emitter.name === action.name\n          ? {...emitter, data: action.data}\n          : emitter,\n      );\n    case 'REMOVE EMITTER':\n      return state.filter(function(value, index, arr) {\n        return value.name !== action.name;\n      });\n    default:\n      return state;\n  }\n};\nexport default emitters;\n","const transport = (state = {events: [], max_length: 0.01}, action) => {\n  switch (action.type) {\n    case 'PLAY_STATE_CHANGE':\n      return {\n        ...state,\n        playState: action.state,\n      };\n    case 'INDEX_INC':\n      return {...state, index: state.index++};\n    case 'INDEX_SET':\n      return {...state, index: action.index};\n    case 'INDEX_RESET':\n      return {...state, index: 0};\n    case 'UPDATE_MAX_LENGTH':\n      return {\n        ...state,\n        max_length: action.max_length,\n      };\n    case 'ADD_AUDIO_EVENT':\n      return {\n        ...state,\n        events: [\n          ...state.events,\n          {name: action.name, index: action.index, value: action.value},\n        ],\n      };\n    default:\n      return state;\n  }\n};\nexport default transport;\n","import {combineReducers} from 'redux';\nimport emitters from './emitters';\nimport transport from './transport';\nexport default combineReducers({\n  emitters,\n  transport,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from 'react-redux';\nimport {createStore} from 'redux';\nimport rootReducer from './reducers';\n\nconst store = createStore(rootReducer);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}