(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{411:function(e,t,a){e.exports=a.p+"static/media/brain-overview.3b0eb74b.jpg"},461:function(e,t,a){e.exports=a(740)},466:function(e,t,a){},467:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},472:function(e,t,a){},740:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(30),i=a.n(o),c=(a(466),a(53)),l=a(21),s=(a(467),a(51)),u=(a(472),a(473),a(739),a(816)),m=a(831),d=a(741),p=a(825),h=a(400),f=a.n(h),E=a(836),g=a(832),b=a(833),v=a(223),y=a(820),x=a(819),T=a(821),O=a(822),_=a(842),D=a(840),j=a(406),w=a.n(j),A=a(408),I=a.n(A),S=a(405),k=a.n(S),N=a(843),M=Object(u.a)((function(e){return{appBar:{top:"auto",bottom:0},grow:{flexGrow:1},speedDial:{position:"absolute",zIndex:1,bottom:30,left:0,right:0,margin:"0 auto"}}})),R=[{icon:r.a.createElement(k.a,null),name:"Add DataSource"}];function C(e){var t=e.fDialog,a=void 0===t?function(){}:t,n=M(),o=r.a.useState(!1),i=Object(l.a)(o,2),c=i[0],s=i[1],u=function(e){s(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null),r.a.createElement(y.a,{position:"sticky",color:"primary",className:n.appBar},r.a.createElement(T.a,null,r.a.createElement(O.a,{edge:"start",color:"inherit","aria-label":"open drawer"},r.a.createElement(w.a,null)),r.a.createElement(_.a,{FabProps:{color:"secondary",size:"large"},ariaLabel:"add",icon:r.a.createElement(N.a,null),onClose:u,onOpen:function(e){s(!0)},open:c,className:n.speedDial},R.map((function(e){return r.a.createElement(D.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:function(){u(),a(!0)}})}))),r.a.createElement("div",{className:n.grow}),r.a.createElement(O.a,{edge:"end",color:"inherit"},r.a.createElement(I.a,null)))))}var P=a(148),L=a.n(P),F=a(409),G=a(164),U=a.n(G),z=a(823),H=a(285),B=a.n(H),V=a(36);var W=function(e,t){var a=e.filter((function(e,a,n){return e.name===t}));return a.length>0?a[0]:{}};function X(e){return function(e){return e.reduce((function(e,t){return e+t}))}(e)/e.length}function K(e){var t=X(e);return Math.sqrt(e.reduce((function(e,a){return e+(a-t)*(a-t)}),0)/e.length)}var Y=function(e,t){var a=t||{},n=a.lag||5,r=a.threshold||3.5,o=a.influece||.5;if(void 0===e||e.length<n+2)throw" ## y data array to short(".concat(e.length,") for given lag of ").concat(n);var i=Array(e.length).fill(0),c=e.slice(0),l=e.slice(0,n),s=[];s[n-1]=X(l);var u=[];u[n-1]=K(l);for(var m=n;m<e.length;m++){Math.abs(e[m]-s[m-1])>r*u[m-1]?(e[m]>s[m-1]?i[m]=1:i[m]=-1,c[m]=o*e[m]+(1-o)*c[m-1]):(i[m]=0,c[m]=e[m]);var d=c.slice(m-n,m);s[m]=X(d),u[m]=K(d)}return i};var J=Object(s.b)((function(e,t){return{enabled:W(e.emitters,t.name).enabled,synth:W(e.emitters,t.name).synth,panner3D:W(e.emitters,t.name).panner,position:W(e.emitters,t.name).position,id:W(e.emitters,t.name).id,events:W(e.emitters,t.name).data,max_length:e.transport.max_length}}))((function(e){var t=e.name,a=e.onPositionChange,n=e.callback,o=void 0===n?console.log:n,i=e.enabled,c=e.synth,s=e.panner3D,u=e.position,m=e.events,d=e.id,p=e.max_length,h=e.dispatch,f=r.a.useState(!1),E=Object(l.a)(f,2),g=E[0],b=E[1],v=r.a.useState([]),y=Object(l.a)(v,2);return y[0],y[1],r.a.useEffect((function(){var e=function(e){var t=new V.Synth,a=new V.Panner3D;return t.sync(),a.panningModel="HRTF",t.chain(a,V.Master),e(!0),[t,a]}(b),a=Object(l.a)(e,2),n=a[0],r=a[1];h({type:"UPDATE_EMITTER_AUDIO_NODES",name:t,synth:n,panner:r})}),[]),r.a.useEffect((function(){g&&o(c,s,u)}),[c,s]),r.a.useEffect((function(){g&&a(u)}),[u]),r.a.useEffect((function(){if(g){c.triggerRelease();var e=Y(m.map((function(e,t){return e.y})),{lag:30,threshold:1.5});h({type:"EMITTER_SIGNAL_DATA",name:t,signal_data:e.map((function(e,t){return e/3+.5}))});var a=m.filter((function(t,a,n){return 0!==e[a]}));new V.Part((function(e,t){t=1e3*t+250,c.triggerAttackRelease(t,.5,e)}),a.map((function(e,t){return[e.x/10,e.y]}))).start(0),a[a.length-1].x/10>p&&h({type:"UPDATE_MAX_LENGTH",max_length:a[a.length-1].x/10})}}),[m,g]),i?r.a.createElement(U.a,{bounds:"parent",grid:[10,10],position:u,onStop:function(e,a){var n=a.x,r=a.y;a.node,h({type:"UPDATE_EMITTER_POS",name:t,position:{x:n,y:r}})}},r.a.createElement(z.a,{color:"secondary",disabled:!g,style:{position:"absolute"}},d.slice(0,3),r.a.createElement(B.a,null))):r.a.createElement(r.a.Fragment,null)})),q=a(410),Z=a.n(q),$=Object(u.a)({rhombus:{width:75,height:75,transform:"rotate(45deg)",borderRadius:0},micIcon:{width:45,height:45,transform:"rotate(-45deg)"}});var Q=function(e){var t=e.callback,a=void 0===t?console.log:t,n=e.defaultPos,o=void 0===n?{x:512,y:512}:n,i=$(),c=r.a.useState({x:o.x,y:o.y}),s=Object(l.a)(c,2),u=s[0],m=s[1],d=r.a.useState({width:0,height:0}),p=Object(l.a)(d,2);return p[0],p[1],r.a.useEffect((function(){a(u)}),[u]),r.a.createElement(U.a,{bounds:"parent",grid:[10,10],position:u,onStop:function(e,t){var a=t.x,n=t.y;t.node,m({x:a,y:n})}},r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement(z.a,{color:"primary",size:"large",variant:"extended",className:i.rhombus},r.a.createElement(Z.a,{className:i.micIcon}))))},ee=a(411),te=a.n(ee),ae=Object(u.a)((function(e){return{container_max:{width:"100%",height:"100%",minHeight:"100%"},max_height:{height:"100vh"},responsive_img:{width:"100%",height:"auto"}}}));var ne=Object(s.b)((function(e){return{sources:e.emitters}}))((function(e){var t=e.sources,a=(e.dispatch,ae()),n=r.a.useState(null),o=Object(l.a)(n,2),i=o[0],c=o[1],s=r.a.useState({}),u=Object(l.a)(s,2),m=u[0],d=u[1],h=r.a.useState({x:0,y:0,z:0}),f=Object(l.a)(h,2),E=f[0],g=f[1],b=r.a.useRef();function v(e,t){var a=(t.x-E.x)/b.current.clientWidth,n=(E.y-t.y)/b.current.clientHeight;null!==m[e]&&(m[e].position=t,m[e].panner3D.setPosition(10*a,10*n,0))}return(r.a.useEffect((function(){Object(F.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),r.a.useEffect((function(){console.log("new Audio Input")}),[i]),r.a.useEffect((function(){var e=E.x/b.current.clientWidth,t=E.y/b.current.clientHeight;for(var a in V.Listener.setPosition(e,t,0).setOrientation(0,1,0,0,0,1),m)v(a,m[a].position)}),[E]),r.a.createElement(p.a,{className:a.container_max},r.a.createElement("div",{className:a.container_max,style:{backgroundImage:"url("+te.a+")",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},ref:b},t.map((function(e){return r.a.createElement(J,{key:e.name,name:e.name,onPositionChange:function(t){return v(e.name,t)},callback:function(t,a,n){!function(e,t,a,n){var r=m;r[e]={synth:t,panner3D:a,position:n},d(r)}(e.name,t,a,n)}})})),r.a.createElement(Q,{callback:g}))))})),re=a(742),oe=a(829),ie=a(428),ce=a.n(ie),le=a(429),se=a.n(le),ue=a(835),me=a(839),de=a(841),pe=a(849),he=a(850),fe=Object(ue.a)("zoom","cursor");Object(s.b)((function(e){return{index:e.transport.index}}))((function(e){var t=e.width,a=e.height,n=e.heightSm,o=e.lineData,i=void 0===o?[]:o,c=e.index,s=r.a.useState(),u=Object(l.a)(s,2),m=u[0],d=u[1];function p(e){d(e)}return r.a.createElement("div",{style:{width:t}},r.a.createElement(me.a,{width:t,height:a,containerComponent:r.a.createElement(fe,{zoomDimension:"x",zoomDomain:m,onZoomDomainChange:p,cursorLabel:function(e){var t=e.datum;return"".concat(Math.round(t.x,0))},cursorDimension:"x",defaultCursorValue:c})},r.a.createElement(de.a,{style:{data:{stroke:"tomato"}},data:i,x:"x",y:"y"})),r.a.createElement(me.a,{padding:{top:0,left:50,right:50,bottom:30},width:t,height:n,containerComponent:r.a.createElement(pe.b,{brushDimension:"x",brushDomain:m,onBrushDomainChange:p})},r.a.createElement(he.a,null),r.a.createElement(de.a,{style:{data:{stroke:"tomato"}},data:i,x:"x",y:"y"})))}));var Ee=a(61);var ge=Object(s.b)((function(e,t){return{visibility:W(e.emitters,t.name).enabled,id:W(e.emitters,t.name).id,signal_data:W(e.emitters,t.name).signal_data||[],data:W(e.emitters,t.name).data||[]}}))((function(e){var t=e.name,a=e.visibility,n=e.data,o=e.signal_data,i=e.id,c=e.dispatch,s=r.a.useState({}),u=Object(l.a)(s,2),m=u[0],d=u[1];return r.a.useEffect((function(){c({type:"ADD_EMITTER",name:t,position:{x:0,y:0},id:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))})}),[]),r.a.useEffect((function(){for(var e=[],t=0;t<n.length;t++)e.push({x:t,y:n[t].y,y_s:o[t]});d(e)}),[n,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{variant:"h6"},t),r.a.createElement(v.a,{disableHeight:!0},(function(e){var t=e.width;return r.a.createElement(Ee.d,{width:t,height:200,data:m,syncId:"anyId"},r.a.createElement(Ee.b,{strokeDasharray:"3 3"}),r.a.createElement(Ee.f,{dataKey:"x"}),r.a.createElement(Ee.g,{type:"number",domain:[0,1]}),r.a.createElement(Ee.e,null),r.a.createElement(Ee.c,{type:"step",dot:!1,activeDot:!1,dataKey:"y_s",stroke:"grey"}),r.a.createElement(Ee.c,{type:"monotone",dot:!1,activeDot:{stroke:"red"},dataKey:"y",stroke:"lightgreen"}))})),r.a.createElement(oe.a,{color:a?"default":"secondary",variant:"outlined",onClick:function(){return c({type:"TOGGLE_EMITTER_ENABLED",name:t})}},a?r.a.createElement(ce.a,null):r.a.createElement(se.a,null)),i?r.a.createElement(re.a,null,"ID: ",r.a.createElement("strong",null,i.slice(0,3)),r.a.createElement("em",null,i.slice(3))):null)})),be=a(830),ve=a(287),ye=a.n(ve),xe=a(288),Te=a.n(xe),Oe=a(286),_e=a.n(Oe),De=Object(u.a)((function(e){return{transportControls:{backgroundColor:"#eee",borderRadius:50,padding:"10px 20px",position:"absolute",display:"flex",alignItems:"center",maxWidth:"50vw",bottom:25,left:100},controlFab:{position:"relative",margin:"0 5px"},progressBar:{margin:"0 10px"}}}));var je=Object(s.b)((function(e){return{length:e.transport.max_length}}))((function(e){var t=e.length,a=De(),n=r.a.useState(!1),o=Object(l.a)(n,2),i=o[0],c=o[1],s=r.a.useState(0),u=Object(l.a)(s,2),m=u[0],d=u[1],p=r.a.useState(!1),h=Object(l.a)(p,2),f=h[0],E=h[1];return r.a.useEffect((function(){V.Transport.loop=!0,V.Transport.setLoopPoints(0,t)}),[t]),r.a.createElement("span",{className:a.transportControls},r.a.createElement(z.a,{color:"primary",size:"large",className:a.controlFab,onClick:function(){if(i)V.Transport.pause(),c(!1);else if(V.Transport.start(),c(!0),!1===f){var e=V.Transport.scheduleRepeat((function(e){d(V.Transport.progress)}),.2,0);E(e),console.log(e)}}},i?r.a.createElement(_e.a,null):r.a.createElement(ye.a,null)),r.a.createElement(z.a,{color:"primary",size:"large",className:a.controlFab,onClick:function(){V.Transport.seconds=0,V.Transport.stop(),V.Transport.seconds=0,V.Transport.start(),V.Transport.stop(),V.Transport.clear(f),E(!1),d(0),c(!1)}},r.a.createElement(Te.a,null)),r.a.createElement(be.a,{variant:"determinate",style:{width:200},value:100*m}),r.a.createElement(re.a,{variant:"h5",className:a.progressBar},(m*t).toFixed(1),"/",t.toFixed(1),"s"))})),we=Object(u.a)((function(e){return{container_max:{width:"100%",height:"100%"},max_height:{height:"100vh",overflowY:"scroll"},responsive_img:{width:"100%",height:"auto"},transportControls:{position:"absolute",bottom:25,left:100},controlFab:{position:"relative",margin:"0 5px"}}}));var Ae=Object(s.b)()((function(e){var t=e.dispatch,a=we(),n=r.a.useRef(),o=r.a.useState([]),i=Object(l.a)(o,2),s=i[0],u=i[1],h=r.a.useState(!1),y=Object(l.a)(h,2),x=y[0],T=y[1];function O(){T(!1)}return r.a.useEffect((function(){V.Transport.clear();for(var e=0;e<s.length;e++)t({type:"EMITTER_DATA",name:"Channel ".concat(e),data:s[e]})}),[s]),r.a.createElement("div",{style:{width:"100vw",height:"100vh"}},r.a.createElement(m.a,{container:!0,direction:"row"},r.a.createElement(m.a,{item:!0,component:d.a,xs:12,md:8,className:a.max_height},r.a.createElement(ne,{sources:[],ref:n}),r.a.createElement(je,null)),r.a.createElement("div",{style:{height:"5vh",width:0}}),r.a.createElement(m.a,{item:!0,component:d.a,elevation:3,xs:12,md:4,className:a.max_height,style:{position:"relative"}},r.a.createElement(p.a,{className:a.container_max,style:{overflowY:"scroll"}},r.a.createElement(E.a,{open:x,onClose:O},r.a.createElement(g.a,null,"Load CSV EEG Recording"),r.a.createElement(b.a,null,r.a.createElement(f.a,{onFileLoaded:function(e){console.log(">>>LOAD",e);for(var t=[],a=function(){r=(r=e.map((function(e){return e[n]}))).filter((function(e,t,a){return!isNaN(e)}));var a=Math.min.apply(Math,Object(c.a)(r)),o=Math.max.apply(Math,Object(c.a)(r)),i=r.map((function(e,t){return{x:t,y:(e-a)/(o-a)}}));t[n]=i},n=0;n<e[0].length;n++){var r;a()}u(t),O()},parserOptions:{dynamicTyping:!0,skipEmptyLine:!0}}),r.a.createElement("div",{style:{minHeight:"50px"}}))),s?r.a.createElement(v.a,{disableHeight:!0,style:{position:"sticky"}},(function(e){var t=e.width;return r.a.createElement(Ee.d,{width:t,height:50,data:s[0],syncId:"anyId"},r.a.createElement(Ee.a,null),r.a.createElement(Ee.f,{dataKey:"x"}))})):null,s?s.map((function(e,t){return r.a.createElement(ge,{key:t,name:"Channel ".concat(t)})})):null),r.a.createElement(C,{fDialog:T}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(135),Se=a(54),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EMITTER":return[].concat(Object(c.a)(e),[{name:t.name,position:t.position,synth:t.synth,panner:t.panner3D,enabled:!0,id:t.id}]);case"UPDATE_EMITTER_AUDIO_NODES":return e.map((function(e){return e.name===t.name?Object(Se.a)({},e,{synth:t.synth,panner:t.panner}):e}));case"TOGGLE_EMITTER_ENABLED":return e.map((function(e){return e.name===t.name?Object(Se.a)({},e,{enabled:!e.enabled}):e}));case"UPDATE_EMITTER_POS":return e.map((function(e){return e.name===t.name?Object(Se.a)({},e,{position:t.position}):e}));case"EMITTER_SIGNAL_DATA":return e.map((function(e){return e.name===t.name?Object(Se.a)({},e,{signal_data:t.signal_data}):e}));case"EMITTER_DATA":return e.map((function(e){return e.name===t.name?Object(Se.a)({},e,{data:t.data}):e}));case"REMOVE EMITTER":return e.filter((function(e,a,n){return e.name!==t.name}));default:return e}},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{events:[],max_length:.01},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAY_STATE_CHANGE":return Object(Se.a)({},e,{playState:t.state});case"INDEX_INC":return Object(Se.a)({},e,{index:e.index++});case"INDEX_SET":return Object(Se.a)({},e,{index:t.index});case"INDEX_RESET":return Object(Se.a)({},e,{index:0});case"UPDATE_MAX_LENGTH":return Object(Se.a)({},e,{max_length:t.max_length});case"ADD_AUDIO_EVENT":return Object(Se.a)({},e,{events:[].concat(Object(c.a)(e.events),[{name:t.name,index:t.index,value:t.value}])});default:return e}},Me=Object(Ie.b)({emitters:ke,transport:Ne}),Re=Object(Ie.c)(Me);i.a.render(r.a.createElement(s.a,{store:Re},r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[461,1,2]]]);
//# sourceMappingURL=main.edb8d4ac.chunk.js.map